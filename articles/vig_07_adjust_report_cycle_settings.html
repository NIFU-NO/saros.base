<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Draft report • saros.base</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="vig_07_adjust_report_cycle_settings_files/libs/quarto-html/popper.min.js"></script><script src="vig_07_adjust_report_cycle_settings_files/libs/quarto-html/tippy.umd.min.js"></script><link href="vig_07_adjust_report_cycle_settings_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="vig_07_adjust_report_cycle_settings_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Draft report">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">saros.base</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/vig_01_basic_file_system.html">Basic R, Quarto and file system setup</a></li>
    <li><a class="dropdown-item" href="../articles/vig_02_project_setup.html">Project setup</a></li>
    <li><a class="dropdown-item" href="../articles/vig_03_configure_report_cycle.html">Configure Saros settings for a project</a></li>
    <li><a class="dropdown-item" href="../articles/vig_04_prepare_data.html">Prepare dataset</a></li>
    <li><a class="dropdown-item" href="../articles/vig_05_standard_variable_names.html">Standard variable naming in longitudinal projects</a></li>
    <li><a class="dropdown-item" href="../articles/vig_06_prepare_chapter_overview.html">Preparing the chapter overview</a></li>
    <li><a class="dropdown-item" href="../articles/vig_07_adjust_report_cycle_settings.html">Draft report</a></li>
    <li><a class="dropdown-item" href="../articles/vig_31_render.html">Render</a></li>
    <li><a class="dropdown-item" href="../articles/vig_32_render_problems.html">Error messages and Frequently Asked Questions</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NIFU-NO/saros.base/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Draft report</h1>




      <small class="dont-index">Source: <a href="https://github.com/NIFU-NO/saros.base/blob/main/vignettes/vig_07_adjust_report_cycle_settings.qmd" class="external-link"><code>vignettes/vig_07_adjust_report_cycle_settings.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <p>After all the data has been washed, the chapter overview has been created, and any adjustments to the templates in <code>02_resources</code> have been made, we can finally create a draft report!</p>
<ol type="1">
<li><p>It is natural to set up an RStudio Project (*.Rproj) for the Saros folder that remembers unsaved R files, some personal preferences for the project, etc. But avoid saving the working memory (Environment) to disk (.Rdata) , so that functionality can be turned off in Project options… The reason is that over time there can be many large objects, and as much as possible should be able to be run from scratch when you need it.</p></li>
<li>
<p>Given that everything is set up correctly, there are really only 2-3 syntax files you will need to work with each implementation.</p>
<ol start="0" type="1">
<li>
<code>000_initialize_project.R</code>: Establishes global paths, and lists to be populated with datasets, etc for each year. The system is set up so that you can easily handle several years (implementations) without accidentally overwriting each other. You are actually guaranteed that the spring of 2024 will always be the spring of 2024 when you loop over several years - given that the data sets are stored in the correct folders.</li>
<li>
<code>001_configure_report.R</code>: This file is, in a way, the main file from which you control most things. From this, you can select a cohort/implementation you want to run, or loop over several at the same time (even several respondent groups, such as in the Participant surveys). The first loop is meant to be run to generate drafts. Further down are ready-made scripts to compile the web pages/PDF files, as well as generate access protection and issue password access to institutions.</li>
<li>
<code>002_specify_report_cycle_params_for_{CYCLE}.R</code>: Little used so far. Used as storage of year-specific information that can be used to fill in the report’s fixed points, such as report number, the survey’s opening period, etc.</li>
<li>
<code>003_get_report_cycle_paths.R</code>: Here you should rarely need to change anything, as long as there are no odd exceptions a year.</li>
<li>
<code>200_prep_data_for_{CYCLE}.R</code>: You can choose whether you want to do all washing of post-data collection data outside the Saros process, or inside.
<ol type="1">
<li><p>If you want to do all the data washing before Saros is involved (for example, that it is done by a Stata user), you should still keep this R script to read in the actual variable labels from the raw data again, as Stata and SPSS cut off variables - labels. In addition, you discover a number of things when you are running saros, which are easiest to fix in this script. Typically this applies to variable labels and similar “aesthetics”.</p></li>
<li><p>If you want to do everything in the Saros process, it may be natural to divide the data preparation into several scripts and put in a subfolder for the given year/implementation so that you keep order (must then update in the get_paths script).</p></li>
</ol>
<em>Irrespective of which direction, the possibility should be kept open that, during implementation, it can be switched between the two, for increased robustness. Also, it is important to save the data sets between each step for documentation, practical considerations (a chapter author wants all the data, etc).</em>
</li>
<li>
<code>draft_saros_reports.R</code>: Here the chapter overview and settings in <code>_report_generation_setup.yaml</code> are obtained (which can be overridden for a specific implementation, or for just the mesos reports).</li>
<li>
<code>render_and_publish.R</code>: In this script everything is moved from the folder with finished drafts to a temporary folder (temp). The latter folder should not be located on OneDrive/cloud solution/Sharepoint as there are many files that are copied and created which run slowly when OneDrive has to synchronize along the way. BUT MORE IMPORTANTLY, SHAREPOINT HAS A LIMITATION ON THE NUMBER OF CHARACTERS IN THE PATHS WHICH CAUSES FILES SUDDENLY NOT TO BE FOUND AND GIVES WEIRD ERROR MESSAGES.</li>
<li>
<code>email_credentials.R</code>: This is for mesos reports only. With an overview of e-mail information for contact persons at the institutions who will each have their own report, they can be sent usernames/passwords. Set <code>send_emails &lt;- FALSE</code> to only create drafts in your Outlook folder for this. Set as `TRUE’ to actually send out immediately (does not affect any drafts you may have already created in your Outlook folder).</li>
</ol>
</li>
</ol>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'light-border',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config);
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script></main>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Stephan Daus, Nordic Institute for The Studies of Innovation, Research and Education (NIFU), Kristiania University College.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
